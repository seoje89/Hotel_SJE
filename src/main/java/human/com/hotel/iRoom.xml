<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
		PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace="인터페이스의 경로명+이름" -->		
<mapper namespace="human.com.hotel.iRoom">
	<!-- select id="인터페이스의 메소드" resultType="인터페이스의 반환데이터 타입" -->
	<select id="getRoomList" resultType="human.com.hotel.Roominfo">
		select a.roomcode, a.name roomname, b.name typename, a.howmany, a.howmuch
		 from room a, roomtype b 
		 where a.type=b.typecode order by roomcode
	</select>
	
	<select id="getRoomType" resultType="human.com.hotel.Roomtype">
		select typecode, name from roomtype order by typecode
	</select>
	
	<!-- resultType은 select만 존재(조회해서 보내줘야함), 다른 쿼리문은 리턴할 결과값이 없으므로 resultType이 없다 -->
	<delete id="doDeleteRoom">
		delete from room where roomcode=#{param1}
	</delete>
	
	<insert id="doJoinRoom">
		insert into room (roomcode,name,type,howmany,howmuch) 
			values (seq_room.nextval,#{param1},#{param2},#{param3},#{param4})
	</insert>	

	
	<update id="doUpdateRoom">
		update room set name=#{param2}, type=#{param3}, howmany=${param4}, howmuch=${param5}
		where roomcode=#{param1}
	</update>
	
	<insert id="goNewbie">
		insert into member (name,loginid,passcode)
			values (#{param1},#{param2},#{param3})
	</insert>
	
	<select id="doCheckUser" resultType="int">
		select count(*) from member where loginid=#{param1} and passcode=#{param2}
	</select>
	
	<insert id="doReservationRoom">
		insert into booking (bookcode, roomname, roomtype, checkin, checkout, rperson, person, name, mobile)
			values (seq_book.nextval,#{param1},#{param2},#{param3},#{param4},#{param5},#{param6},#{param9},#{param10})
	</insert>
	
	<delete id="doDeleteBook">
		delete from room where bookcode=#{param1}
	</delete>
	
	<select id="getBookOk" resultType="human.com.hotel.BookOk">
		select a.roomcode, a.name roomname, b.name typename, a.howmany, a.howmuch 
			from room a, roomtype b 
			where a.type=b.typecode order by roomcode		
	</select> 
	
</mapper>